# README
This is sample code when learning antlr4.
## csv 
Purpose: Load csv file content to a list, which element is a mapping from csv header to value

Structure:
- CSV.g4        -> csv grammar definition file
- t.csv         -> sample csv file to test
- LoadCSV.java  -> main logic file
- other files   -> generated by antlr

Run:

```
$ cat t.csv
-> 
Details,Month,Amount
Mid Bonus,June,"$2,000"
,January,"""zippo"""
Total Bonuses,"","$5,000"


$ antlr4 CSV.g4
-> generate the CSV*.java files

$ javac CSV*.java LoadCSV.java
-> compile to *.class file

$ java LoadCSV t.csv
-> Output [{Details=Mid Bonus, Month=June, Amount="$2,000"}, {Details=, Month=January, Amount="""zippo"""}, {Details=Total Bonuses, Month="", Amount="$5,000"}]

```


## json2xml 
Purpose: transfer json file to xml file

Structure:
- JSON.g4        -> json grammar definition file
- t.json         -> sample json file to test
- JSON2XML.java  -> main logic file
- other files   -> generated by antlr

Run:

```
$ cat t.json
-> {
       "description" : "An imaginary server config file",
       "logs" : {"level":"verbose", "dir":"/var/log"},
       "host" : "antlr.org",
       "admin": ["parrt", "tombu"],
       "aliases": []
   }


$ antlr4 JSON.g4
-> generate the JSON*.java files

$ javac *.java
-> compile to *.class file

$ java JSON2XML t.json
-> Output as below
<description>An imaginary server config file</description>
<logs>
<level>verbose</level>
<dir>/var/log</dir>
</logs>
<host>antlr.org</host>
<admin>
<element>parrt</element>
<element>tombu</element>
</admin>
<aliases></aliases>
```

## cymbol2graphviz 
Purpose: generate a graphviz of caller -> callee relations in cymbol programming language.

Structure:
- Cymbol.g4        -> Cymbol grammar definition file
- t.cymbol         -> sample cymbol file to test
- CallGraph.java  -> main logic file
- other files   -> generated by antlr

Run:

```
$ cat t.json
-> 
int main() { fact(); a(); }

float fact(int n) {
  print(n);
  
  if ( n==0 ) then return 1;
  return n * fact(n-1);
}

void a() { int x = b(); if false then {c(); d();} }
void b() { c(); }
void c() { b(); }
void d() { }
void e() { }



$ antlr4 Cymbol.g4
-> generate the Cymbol*.java files

$ javac *.java
-> compile to *.class file

$ java CallGraph t.cymbol
-> 
edges: {main=[fact, a], fact=[print, fact], a=[b, c, d], b=[c], c=[b]}, functions: [main, fact, a, b, c, d, e]
digraph G {
  ranksep=.25;
  edge [arrowsize=.5]
  node [shape=circle, fontname="ArialNarrow",
        fontsize=12, fixedsize=true, height=.45];
  main; fact; a; b; c; d; e; 
  main -> fact;
  main -> a;
  fact -> print;
  fact -> fact;
  a -> b;
  a -> c;
  a -> d;
  b -> c;
  c -> b;
}

```